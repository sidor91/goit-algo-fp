import random
import matplotlib.pyplot as plt

# Аналітичні ймовірності (у відсотках)
theoretical_probs = {
  2: 2.78, 3: 5.56, 4: 8.33, 5: 11.11, 6: 13.89,
  7: 16.67, 8: 13.89, 9: 11.11, 10: 8.33, 11: 5.56, 12: 2.78
}


def simulate_dice_rolls(num_rolls=100_000):
  results = {total: 0 for total in range(2, 13)}

  for _ in range(num_rolls):
    roll_sum = random.randint(1, 6) + random.randint(1, 6)
    results[roll_sum] += 1

  # Переводимо в ймовірності
  probabilities = {
    total: (count / num_rolls) * 100 for total, count in results.items()
  }
  return probabilities


# Симуляція
simulated_probs = simulate_dice_rolls()

# Вивід таблиці
print(f"{'Сума':^6} | {'Імовірність (симуляція)':^27} | {'Аналітична':^15}")
print("-" * 54)
for total in range(2, 13):
  sim = simulated_probs[total]
  theo = theoretical_probs[total]
  print(f"{total:^6} | {sim:>10.2f}% {'':<15} | {theo:>8.2f}%")

# Побудова графіку
x = list(range(2, 13))
sim_y = [simulated_probs[val] for val in x]
theo_y = [theoretical_probs[val] for val in x]

plt.figure(figsize=(10, 5))
plt.bar(x, sim_y, width=0.4, label="Симуляція", align="center", color="#69b3a2")
plt.plot(x, theo_y, marker='o', color='red', linestyle='--', label="Аналітична")
plt.xticks(x)
plt.xlabel("Сума")
plt.ylabel("Імовірність (%)")
plt.title("Імовірності сум при киданні двох кубиків")
plt.legend()
plt.grid(axis='y', linestyle='--', alpha=0.6)
plt.tight_layout()
plt.show()

"""
1) Точність симуляції: Результати, отримані за допомогою методу Монте-Карло з 100,000 кидків, показують дуже високу точність у порівнянні з теоретичними значеннями. Відхилення між симульованими та аналітичними ймовірностями складає менше 0.5% для всіх сум.
2) Розподіл ймовірностей: Як у симуляції, так і в теорії найбільша ймовірність припадає на суму 7 (16.67%), що підтверджує правильність розподілу. Найменші ймовірності мають крайні значення - суми 2 та 12 (по 2.78%).
3) Симетричність розподілу: Обидва методи демонструють симетричний розподіл відносно суми 7, де ймовірності сум 6 та 8, 5 та 9, 4 та 10, 3 та 11, 2 та 12 є однаковими.
4) Ефективність методу Монте-Карло: При достатній кількості ітерацій (100,000) метод Монте-Карло дає результати, які практично не відрізняються від точних аналітичних розрахунків, що підтверджує його надійність для розв'язання ймовірнісних задач.
5) Практичне застосування: Даний приклад демонструє, що метод Монте-Карло є потужним інструментом для вирішення складних ймовірнісних задач, особливо коли аналітичні розрахунки є складними або неможливими.

Загальний висновок: Симуляція підтвердила теоретичні розрахунки та показала високу ефективність методу Монте-Карло для моделювання випадкових процесів.
"""